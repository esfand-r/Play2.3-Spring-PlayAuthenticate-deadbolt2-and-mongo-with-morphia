Authentication and authorization in a Play application
=================================

 This project is an example implementation of a multi-module play app with authentication and authorization capabilities. This is accompanied by a [blog post](http://esfand-r.github.io/2015/05/fun-and-games-in-the-play-ground-authentication-and-authorization/).
 Play was chosen as the main framework to develop this app because of it's amazing ecosystem, plugins and other benefits 
 such as Akka, CoffeeScript support Web Sockets and a lot more. 
 
 The starting point of this application was [Play Authenticate with Mongo](https://www.typesafe.com/activator/template/play-authenticate-mongo)
 It's a configurable framework that makes the job easy and customizable. 
 Next [Silhouette](http://silhouette.mohiva.com) and [SecureSocial](http://securesocial.ws) 
 will be used to compare all these very cool frameworks.
 
 This project mainly uses java but Scala is also used throughout.
 
 + Play Framework (2.3.8)
 + PlayAuthenticate (0.6.8)
 + Easymail (0.6.7)
 + Spring-context (4.1.6.RELEASE)
 + Javax Inject (1)
 + Spring-test (4.1.6.RELEASE)
 + Scala test plus (1.2.0)
 + Deadbolt (2.3.3)
 + Mongo Java Driver (3.0.0)
 + Morphia (0.111)
 + Flapdoodle (1.47.3)
 + Play-bootstrap (0.4)

Dependency Injection
=================================
 For dependency injection Spring is used but it can be easy swapped with dagger or guice(Play2.4's default). 
 jsr330 annotations are used throughput to make the transition easier.
 Here is a small app I created using [Dagger](http://square.github.io/dagger/) for dependency injection.
 
Database
=================================
 For persistence MongoDB is used along with Morphia driver. 
 Branches will be provided to have the same implementation using other drivers such as ReactiveMongo.
 Switching the driver is easy as only some annotation change and changes in DAOs are required.
 
 It's possible to integrate [QueryDSL](http://www.querydsl.com/) with [Morphia](https://github.com/mongodb/morphia).
 The work is ungoing but for now Q classes are generated by executing [QueryDSLClassGeneratorRun.createQuerydslClasses](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/project/QueryDSLClassGeneratorRun.scala)
 which uses [QueryDSLClassGenerator](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/modules/securitycommon/app/com/mycane/security/model/QueryDSLClassGenerator.java) 
 and [GenericExporter](https://github.com/querydsl/querydsl/blob/master/querydsl-codegen/src/main/java/com/querydsl/codegen/GenericExporter.java) to generate the necessary classes.
  
Testing
=================================
 Spring-test combined with ScalaTest are and will be used for testing. When persistence with MongoDB is required, I used Flapdoodle.
 [TestConfig](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/modules/usermanagement/test/com/mycane/usermanagement/TestConfig.java) , 
 [MongoIntegrationTestBase](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/modules/usermanagement/test/com/mycane/usermanagement/MongoIntegrationTestBase.scala) 
 and [UserServiceIntegrationTest](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/modules/usermanagement/test/com/mycane/usermanagement/service/user/UserServiceIntegrationTest.scala) 


Sample
======
[Sample](http://www.mycane.io/)

Usage
=====

+ Download the files or fork the repository

+ Configure mongodb URI in [application.conf](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/conf/application.conf)

+ Configure social [providers](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/conf/security/social.conf)

+ Configure [email](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/conf/email/smtp.conf)

+ Configure [plugins](https://github.com/esfand-r/Play2.3-Spring-PlayAuthenticate-deadbolt2-and-mongo-with-morphia/blob/master/modules/web/conf/play.plugins)

+ **Run the project!** (**./activator run**)
